function drawController(t){var e=$("#drawArea"),o=$("#drawBox"),s=$("#addPart3 ul li"),n=$("#entrySlected");drawFun(e,o,s,n,selectedScreen)}function drawFun(t,e,o,s,n){function i(e){s.hide(),h.boxTop=t.offset().top,h.boxLeft=t.offset().left,d.startX=e.pageX,d.startY=e.pageY}function f(t){d.stopX=t.pageX,d.stopY=t.pageY,d.startX-d.stopX>=0?(h.left=d.stopX,h.width=d.startX-d.stopX):(h.left=d.startX,h.width=d.stopX-d.startX),d.startY-d.stopY>=0?(h.top=d.stopY,h.height=d.startY-d.stopY):(h.top=d.startY,h.height=d.stopY-d.startY),e.width(h.width),e.height(h.height),e.css({top:h.top-h.boxTop,left:h.left-h.boxLeft});var o=h.top-h.boxTop+h.height/2+50,s=h.left-h.boxLeft+h.width/2-50;l(s,o)}function a(){return t.off("mousemove"),t.off("mouseup"),t.off("mouseleave"),h}function l(t,e){s.css({left:t,top:e})}var h={},d={};t.on("mousedown",function(l){i(l),t.on("mousemove",function(t){f(t)}),t.on("mouseup",function(){var t=a();n(o,t),e.width(0),e.height(0),s.show()}),t.on("mouseleave",function(){t.trigger("mouseup")})}),s.find("li").hover(function(){$(this).addClass("selected")},function(){$(this).removeClass("selected")}),s.on("click","li",function(){var t=s.find("li").index($(this)),e=$("#screenPlan ul").find(".selected"),o=$(this).find("p").html(),n=$(this).find("span").eq(0).html(),i=$(this).find("span").eq(1).html(),f=$(this).find("span").eq(2).html(),a=$(this).find("span").eq(3).html();e.css({background:$at.staticColors[t]}),e.find("p").html(o),e.find(".span1").html(n),e.find(".span2").html(i),e.find(".span3").html(f),e.find(".span4").html(a),s.hide(),$("#screenPlan ul li").removeClass("selected")})}function selectedScreen(t,e){function o(o){var s=t.eq(o),n=s.offset().left,i=n+s.width(),f=s.offset().top,a=f+s.outerHeight(),l=e.left,h=e.left+e.width,d=e.top,r=e.top+e.height;return!(l>i||h<n||d>a||r<f)}var s=t.filter(o);t.removeClass("selected"),s.each(function(t){$(this).addClass("selected")})}