{"version":3,"sources":["drawController.js"],"names":["drawController","ControllerDom","drawArea","drawBox","screenLi","entrySlected","drawFun","selectedScreen","onComplete","startInfo","event","hide","boxInfo","boxTop","offset","top","boxLeft","left","eInfo","startX","pageX","startY","pageY","stopInfo","e","stopX","stopY","width","height","css","listTop","listLeft","showEntry","offEvent","off","lefts","tops","on","finishInfo","show","trigger","screenList","obj","filFun","index","dom","eq","domLeft","domRight","domTop","domBottom","boxRight","boxBottom","arr","filter","removeClass","each","$","this","addClass"],"mappings":"AAAA,QAASA,gBAAeC,GACvB,GAAIC,GAAWD,EAAcC,SACzBC,EAAUF,EAAcE,QACxBC,EAAWH,EAAcG,SACzBC,EAAeJ,EAAcI,YACjCC,SAAQJ,EAASC,EAAQC,EAASC,EAAaE,gBAEhD,QAASD,SAAQJ,EAASC,EAAQC,EAASC,EAAaG,GAoBvD,QAASC,GAAUC,GAClBL,EAAaM,OACbC,EAAQC,OAAQX,EAASY,SAASC,IAClCH,EAAQI,QAASd,EAASY,SAASG,KACnCC,EAAMC,OAAST,EAAMU,MACrBF,EAAMG,OAASX,EAAMY,MAEtB,QAASC,GAASC,GACjBN,EAAMO,MAAQD,EAAEJ,MAChBF,EAAMQ,MAAQF,EAAEF,MACbJ,EAAMC,OAAOD,EAAMO,OAAO,GAC5Bb,EAAQK,KAAOC,EAAMO,MACrBb,EAAQe,MAAQT,EAAMC,OAAOD,EAAMO,QAEnCb,EAAQK,KAAOC,EAAMC,OACrBP,EAAQe,MAAQT,EAAMO,MAAMP,EAAMC,QAEhCD,EAAMG,OAAOH,EAAMQ,OAAO,GAC5Bd,EAAQG,IAAMG,EAAMQ,MACpBd,EAAQgB,OAASV,EAAMG,OAAOH,EAAMQ,QAEpCd,EAAQG,IAAMG,EAAMG,OACpBT,EAAQgB,OAASV,EAAMQ,MAAMR,EAAMG,QAEpClB,EAAQwB,MAAMf,EAAQe,OACtBxB,EAAQyB,OAAOhB,EAAQgB,QACvBzB,EAAQ0B,KAAKd,IAAIH,EAAQG,IAAIH,EAAQC,OAAOI,KAAKL,EAAQK,KAAKL,EAAQI,SACtE,IAAIc,GAAWlB,EAAQG,IAAIH,EAAQC,OAAQD,EAAQgB,OAAO,EAAE,GACxDG,EAAYnB,EAAQK,KAAKL,EAAQI,QAASJ,EAAQe,MAAM,EAAE,EAC9DK,GAAUD,EAASD,GAEpB,QAASG,KAIR,MAHA/B,GAASgC,IAAI,aACbhC,EAASgC,IAAI,WACbhC,EAASgC,IAAI,cACNtB,EAER,QAASoB,GAAUG,EAAMC,GACxB/B,EAAawB,KAAKZ,KAAKkB,EAAMpB,IAAIqB,IAxDlC,GAAIxB,MACAM,IACJhB,GAASmC,GAAG,YAAY,SAAS3B,GAChCD,EAAUC,GACVR,EAASmC,GAAG,YAAY,SAASb,GAChCD,EAASC,KAEVtB,EAASmC,GAAG,UAAU,WACrB,GAAIC,GAAaL,GACjBzB,GAAWJ,EAASkC,GACpBnC,EAAQwB,MAAM,GACdxB,EAAQyB,OAAO,GACfvB,EAAakC,SAEdrC,EAASmC,GAAG,aAAa,WACxBnC,EAASsC,QAAQ,eA6CpB,QAASjC,gBAAekC,EAAWC,GAMlC,QAASC,GAAOC,GACf,GAAIC,GAAMJ,EAAWK,GAAGF,GACpBG,EAAUF,EAAI/B,SAASG,KACvB+B,EAAWD,EAAQF,EAAIlB,QACvBsB,EAASJ,EAAI/B,SAASC,IACtBmC,EAAYD,EAAOJ,EAAIjB,SAEvBZ,EAAU0B,EAAIzB,KACdkC,EAAWT,EAAIzB,KAAKyB,EAAIf,MACxBd,EAAS6B,EAAI3B,IACbqC,EAAYV,EAAI3B,IAAI2B,EAAId,MAC5B,SAAIZ,EAAQgC,GAAcG,EAASJ,GAAalC,EAAOqC,GAAeE,EAAUH,GAhBjF,GAAII,GAAMZ,EAAWa,OAAOX,EAC5BF,GAAWc,YAAY,YACvBF,EAAIG,KAAK,SAASZ,GACjBa,EAAEC,MAAMC,SAAS","file":"drawController.js","sourcesContent":["function drawController(ControllerDom){\r\n\tvar drawArea = ControllerDom.drawArea;\r\n\tvar drawBox = ControllerDom.drawBox;\r\n\tvar screenLi = ControllerDom.screenLi;\r\n\tvar entrySlected = ControllerDom.entrySlected;\r\n\tdrawFun(drawArea,drawBox,screenLi,entrySlected,selectedScreen);\r\n}\r\nfunction drawFun(drawArea,drawBox,screenLi,entrySlected,onComplete)\r\n{  \r\n\tvar boxInfo = {};\r\n\tvar eInfo = {};\r\n\tdrawArea.on(\"mousedown\",function(event){\r\n\t\tstartInfo(event)\r\n\t\tdrawArea.on(\"mousemove\",function(e){\r\n\t\t\tstopInfo(e)\r\n\t\t})\r\n\t\tdrawArea.on(\"mouseup\",function(){\r\n\t\t\tvar finishInfo = offEvent();\r\n\t\t\tonComplete(screenLi,finishInfo);\r\n\t\t\tdrawBox.width(0);\r\n\t\t\tdrawBox.height(0);\r\n\t\t\tentrySlected.show();\r\n\t\t})\r\n\t\tdrawArea.on(\"mouseleave\",function(){\r\n\t\t\tdrawArea.trigger(\"mouseup\");\r\n\t\t}) \r\n\t}) \r\n\tfunction startInfo(event){\r\n\t\tentrySlected.hide();\r\n\t\tboxInfo.boxTop= drawArea.offset().top;\r\n\t\tboxInfo.boxLeft= drawArea.offset().left;\r\n\t\teInfo.startX = event.pageX;\r\n\t\teInfo.startY = event.pageY;\r\n\t}\r\n\tfunction stopInfo(e){\r\n\t\teInfo.stopX = e.pageX;\r\n\t\teInfo.stopY = e.pageY;\r\n\t\tif(eInfo.startX-eInfo.stopX>=0){\r\n\t\t\tboxInfo.left = eInfo.stopX;\r\n\t\t\tboxInfo.width = eInfo.startX-eInfo.stopX;\r\n\t\t}else{\r\n\t\t\tboxInfo.left = eInfo.startX;\r\n\t\t\tboxInfo.width = eInfo.stopX-eInfo.startX;\r\n\t\t}\r\n\t\tif(eInfo.startY-eInfo.stopY>=0){\r\n\t\t\tboxInfo.top = eInfo.stopY;\r\n\t\t\tboxInfo.height = eInfo.startY-eInfo.stopY;\r\n\t\t}else{\r\n\t\t\tboxInfo.top = eInfo.startY;\r\n\t\t\tboxInfo.height = eInfo.stopY-eInfo.startY;\r\n\t\t}\r\n\t\tdrawBox.width(boxInfo.width);\r\n\t\tdrawBox.height(boxInfo.height);\r\n\t\tdrawBox.css({top:boxInfo.top-boxInfo.boxTop,left:boxInfo.left-boxInfo.boxLeft});\r\n\t\tvar listTop = (boxInfo.top-boxInfo.boxTop)+boxInfo.height/2+50;\r\n\t\tvar listLeft = (boxInfo.left-boxInfo.boxLeft)+boxInfo.width/2-50;\r\n\t\tshowEntry(listLeft,listTop);\r\n\t}\r\n\tfunction offEvent(){\r\n\t\tdrawArea.off(\"mousemove\");\r\n\t\tdrawArea.off(\"mouseup\");\r\n\t\tdrawArea.off(\"mouseleave\");\r\n\t\treturn boxInfo;\r\n\t}\r\n\tfunction showEntry(lefts,tops){\r\n\t\tentrySlected.css({left:lefts,top:tops});\r\n\t}\r\n}\r\n\r\nfunction selectedScreen(screenList,obj){\r\n\tvar arr = screenList.filter(filFun);\r\n\tscreenList.removeClass(\"selected\");\r\n\tarr.each(function(index){\r\n\t\t$(this).addClass(\"selected\");\r\n\t})\r\n\tfunction filFun(index){\r\n\t\tvar dom = screenList.eq(index);\r\n\t\tvar domLeft = dom.offset().left;\r\n\t\tvar domRight = domLeft+dom.width();\r\n\t\tvar domTop = dom.offset().top;\r\n\t\tvar domBottom = domTop+dom.height();\r\n\t\t\r\n\t\tvar boxLeft = obj.left;\r\n\t\tvar boxRight = obj.left+obj.width;\r\n\t\tvar boxTop = obj.top;\r\n\t\tvar boxBottom = obj.top+obj.height;\r\n\t\tif((boxLeft>domRight) || (boxRight<domLeft) || (boxTop>domBottom) || (boxBottom<domTop)){\r\n\t\t\treturn false\r\n\t\t}else{\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":"/source/"}