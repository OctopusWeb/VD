{"version":3,"sources":["drawController.js"],"names":["drawController","ControllerDom","drawArea","$","drawBox","screenLi","entrySlected","drawFun","selectedScreen","onComplete","startInfo","event","hide","boxInfo","boxTop","offset","top","boxLeft","left","eInfo","startX","pageX","startY","pageY","stopInfo","e","stopX","stopY","width","height","css","listTop","listLeft","showEntry","offEvent","off","lefts","tops","on","finishInfo","show","trigger","find","hover","this","addClass","removeClass","index","selected","value","html","info1","eq","info2","info3","info4","background","$at","staticColors","screenList","obj","filFun","dom","domLeft","domRight","domTop","domBottom","boxRight","boxBottom","arr","filter","each"],"mappings":"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","file":"drawController.js","sourcesContent":["function drawController(ControllerDom){\r\n\tvar drawArea = $(\"#drawArea\");\r\n\tvar drawBox = $(\"#drawBox\");\r\n\tvar screenLi = $(\"#addPart3 ul li\"); \r\n\tvar entrySlected = $(\"#entrySlected\"); \r\n\tdrawFun(drawArea,drawBox,screenLi,entrySlected,selectedScreen);\r\n}\r\nfunction drawFun(drawArea,drawBox,screenLi,entrySlected,onComplete)\r\n{  \r\n\tvar boxInfo = {};\r\n\tvar eInfo = {};\r\n\tdrawArea.on(\"mousedown\",function(event){\r\n\t\tstartInfo(event)\r\n\t\tdrawArea.on(\"mousemove\",function(e){\r\n\t\t\tstopInfo(e)\r\n\t\t})\r\n\t\tdrawArea.on(\"mouseup\",function(){\r\n\t\t\tvar finishInfo = offEvent();\r\n\t\t\tonComplete(screenLi,finishInfo);\r\n\t\t\tdrawBox.width(0);\r\n\t\t\tdrawBox.height(0);\r\n\t\t\tentrySlected.show();\r\n\t\t})\r\n\t\tdrawArea.on(\"mouseleave\",function(){\r\n\t\t\tdrawArea.trigger(\"mouseup\");\r\n\t\t}) \r\n\t}) \r\n\tfunction startInfo(event){\r\n\t\tentrySlected.hide();\r\n\t\tboxInfo.boxTop= drawArea.offset().top;\r\n\t\tboxInfo.boxLeft= drawArea.offset().left;\r\n\t\teInfo.startX = event.pageX;\r\n\t\teInfo.startY = event.pageY;\r\n\t}\r\n\tfunction stopInfo(e){\r\n\t\teInfo.stopX = e.pageX;\r\n\t\teInfo.stopY = e.pageY;\r\n\t\tif(eInfo.startX-eInfo.stopX>=0){\r\n\t\t\tboxInfo.left = eInfo.stopX;\r\n\t\t\tboxInfo.width = eInfo.startX-eInfo.stopX;\r\n\t\t}else{\r\n\t\t\tboxInfo.left = eInfo.startX;\r\n\t\t\tboxInfo.width = eInfo.stopX-eInfo.startX;\r\n\t\t}\r\n\t\tif(eInfo.startY-eInfo.stopY>=0){\r\n\t\t\tboxInfo.top = eInfo.stopY;\r\n\t\t\tboxInfo.height = eInfo.startY-eInfo.stopY;\r\n\t\t}else{\r\n\t\t\tboxInfo.top = eInfo.startY;\r\n\t\t\tboxInfo.height = eInfo.stopY-eInfo.startY;\r\n\t\t}\r\n\t\tdrawBox.width(boxInfo.width);\r\n\t\tdrawBox.height(boxInfo.height);\r\n\t\tdrawBox.css({top:boxInfo.top-boxInfo.boxTop,left:boxInfo.left-boxInfo.boxLeft});\r\n\t\tvar listTop = (boxInfo.top-boxInfo.boxTop)+boxInfo.height/2+50;\r\n\t\tvar listLeft = (boxInfo.left-boxInfo.boxLeft)+boxInfo.width/2-50;\r\n\t\tshowEntry(listLeft,listTop);\r\n\t}\r\n\tfunction offEvent(){\r\n\t\tdrawArea.off(\"mousemove\");\r\n\t\tdrawArea.off(\"mouseup\");\r\n\t\tdrawArea.off(\"mouseleave\");\r\n\t\treturn boxInfo;\r\n\t}\r\n\tfunction showEntry(lefts,tops){\r\n\t\tentrySlected.css({left:lefts,top:tops});\r\n\t}\r\n\tentrySlected.find(\"li\").hover(function(){ \r\n\t\t$(this).addClass(\"selected\");\r\n\t},function(){ \r\n\t\t$(this).removeClass(\"selected\");\r\n\t})\r\n\tentrySlected.on(\"click\",\"li\",function(){ \r\n\t\tvar index = entrySlected.find(\"li\").index($(this));\r\n\t\tvar selected = $(\"#screenPlan ul\").find(\".selected\");\r\n\t\tvar value = $(this).find(\"p\").html();\r\n\t\tvar info1 = $(this).find(\"span\").eq(0).html();\r\n\t\tvar info2 = $(this).find(\"span\").eq(1).html(); \r\n\t\tvar info3 = $(this).find(\"span\").eq(2).html();\r\n\t\tvar info4 = $(this).find(\"span\").eq(3).html();\r\n\t\tselected.css({\"background\":$at.staticColors[index]});\r\n\t\tselected.find(\"p\").html(value); \r\n\t\tselected.find(\".span1\").html(info1); \r\n\t\tselected.find(\".span2\").html(info2); \r\n\t\tselected.find(\".span3\").html(info3); \r\n\t\tselected.find(\".span4\").html(info4);\r\n\t\tentrySlected.hide();\r\n\t}) \r\n}\r\n\r\nfunction selectedScreen(screenList,obj){\r\n\tvar arr = screenList.filter(filFun);\r\n\tscreenList.removeClass(\"selected\");\r\n\tarr.each(function(index){\r\n\t\t$(this).addClass(\"selected\");\r\n\t})\r\n\tfunction filFun(index){\r\n\t\tvar dom = screenList.eq(index);\r\n\t\tvar domLeft = dom.offset().left;\r\n\t\tvar domRight = domLeft+dom.width();\r\n\t\tvar domTop = dom.offset().top;\r\n\t\tvar domBottom = domTop+dom.height();\r\n\t\t\r\n\t\tvar boxLeft = obj.left;\r\n\t\tvar boxRight = obj.left+obj.width;\r\n\t\tvar boxTop = obj.top;\r\n\t\tvar boxBottom = obj.top+obj.height;\r\n\t\tif((boxLeft>domRight) || (boxRight<domLeft) || (boxTop>domBottom) || (boxBottom<domTop)){\r\n\t\t\treturn false\r\n\t\t}else{\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":"/source/"}